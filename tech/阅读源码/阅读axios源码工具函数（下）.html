<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>阅读axios源码工具函数（下） | 一起学前端</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.c743a759.css" as="style"><link rel="preload" href="/assets/js/app.3aeb1e98.js" as="script"><link rel="preload" href="/assets/js/2.83af3cc0.js" as="script"><link rel="preload" href="/assets/js/124.55deaf22.js" as="script"><link rel="prefetch" href="/assets/js/10.3b2706bb.js"><link rel="prefetch" href="/assets/js/100.c8f756f0.js"><link rel="prefetch" href="/assets/js/101.04b72338.js"><link rel="prefetch" href="/assets/js/102.8a80ca0d.js"><link rel="prefetch" href="/assets/js/103.39222573.js"><link rel="prefetch" href="/assets/js/104.ef400740.js"><link rel="prefetch" href="/assets/js/105.cec6e582.js"><link rel="prefetch" href="/assets/js/106.b3f2d115.js"><link rel="prefetch" href="/assets/js/107.6fab1075.js"><link rel="prefetch" href="/assets/js/108.34b05216.js"><link rel="prefetch" href="/assets/js/109.097f1fcb.js"><link rel="prefetch" href="/assets/js/11.d0e2210e.js"><link rel="prefetch" href="/assets/js/110.98b0cd18.js"><link rel="prefetch" href="/assets/js/111.ac942fbf.js"><link rel="prefetch" href="/assets/js/112.37924f75.js"><link rel="prefetch" href="/assets/js/113.e0f894d4.js"><link rel="prefetch" href="/assets/js/114.d2967b20.js"><link rel="prefetch" href="/assets/js/115.42ac08cd.js"><link rel="prefetch" href="/assets/js/116.d91753ef.js"><link rel="prefetch" href="/assets/js/117.f4538cd6.js"><link rel="prefetch" href="/assets/js/118.2d8297db.js"><link rel="prefetch" href="/assets/js/119.e655a176.js"><link rel="prefetch" href="/assets/js/12.f8c43eb2.js"><link rel="prefetch" href="/assets/js/120.9de91b9b.js"><link rel="prefetch" href="/assets/js/121.c87bffa0.js"><link rel="prefetch" href="/assets/js/122.3da90492.js"><link rel="prefetch" href="/assets/js/123.b0f831ca.js"><link rel="prefetch" href="/assets/js/125.ce7b3e7e.js"><link rel="prefetch" href="/assets/js/126.f1046b02.js"><link rel="prefetch" href="/assets/js/127.4f2064bd.js"><link rel="prefetch" href="/assets/js/128.954f6993.js"><link rel="prefetch" href="/assets/js/129.27175358.js"><link rel="prefetch" href="/assets/js/13.b0d38a0a.js"><link rel="prefetch" href="/assets/js/130.eeffe648.js"><link rel="prefetch" href="/assets/js/131.6fb52502.js"><link rel="prefetch" href="/assets/js/132.d69871d0.js"><link rel="prefetch" href="/assets/js/133.0d1c7395.js"><link rel="prefetch" href="/assets/js/134.20aa1a8e.js"><link rel="prefetch" href="/assets/js/135.4dceb969.js"><link rel="prefetch" href="/assets/js/136.2a931837.js"><link rel="prefetch" href="/assets/js/137.4a3ea2bc.js"><link rel="prefetch" href="/assets/js/138.f3835b29.js"><link rel="prefetch" href="/assets/js/139.b9f3bbb3.js"><link rel="prefetch" href="/assets/js/14.fe64de54.js"><link rel="prefetch" href="/assets/js/140.811b72d5.js"><link rel="prefetch" href="/assets/js/141.80a96e0b.js"><link rel="prefetch" href="/assets/js/142.9fe53172.js"><link rel="prefetch" href="/assets/js/143.f1f9891c.js"><link rel="prefetch" href="/assets/js/144.09369c3e.js"><link rel="prefetch" href="/assets/js/15.7784b150.js"><link rel="prefetch" href="/assets/js/16.dca47ed7.js"><link rel="prefetch" href="/assets/js/17.053c0c85.js"><link rel="prefetch" href="/assets/js/18.7d76c9cc.js"><link rel="prefetch" href="/assets/js/19.504036bb.js"><link rel="prefetch" href="/assets/js/20.cdf651a9.js"><link rel="prefetch" href="/assets/js/21.750cb245.js"><link rel="prefetch" href="/assets/js/22.85646704.js"><link rel="prefetch" href="/assets/js/23.9c2d9bfa.js"><link rel="prefetch" href="/assets/js/24.b9b5e278.js"><link rel="prefetch" href="/assets/js/25.787db747.js"><link rel="prefetch" href="/assets/js/26.1b65e7e2.js"><link rel="prefetch" href="/assets/js/27.5b29b74d.js"><link rel="prefetch" href="/assets/js/28.c41c72df.js"><link rel="prefetch" href="/assets/js/29.f452a5af.js"><link rel="prefetch" href="/assets/js/3.b7576c58.js"><link rel="prefetch" href="/assets/js/30.4d7c359f.js"><link rel="prefetch" href="/assets/js/31.6cf93bd9.js"><link rel="prefetch" href="/assets/js/32.b3e0e356.js"><link rel="prefetch" href="/assets/js/33.731b7cbd.js"><link rel="prefetch" href="/assets/js/34.eb522b7e.js"><link rel="prefetch" href="/assets/js/35.7e9a32ef.js"><link rel="prefetch" href="/assets/js/36.7d0ff7fd.js"><link rel="prefetch" href="/assets/js/37.f6bb08ad.js"><link rel="prefetch" href="/assets/js/38.cdb5bb8c.js"><link rel="prefetch" href="/assets/js/39.f16d59e2.js"><link rel="prefetch" href="/assets/js/4.30bc6949.js"><link rel="prefetch" href="/assets/js/40.c3b52b21.js"><link rel="prefetch" href="/assets/js/41.3cf2209b.js"><link rel="prefetch" href="/assets/js/42.acafff1c.js"><link rel="prefetch" href="/assets/js/43.33fc0f17.js"><link rel="prefetch" href="/assets/js/44.4a24ebd3.js"><link rel="prefetch" href="/assets/js/45.47b9a80c.js"><link rel="prefetch" href="/assets/js/46.a20cee2e.js"><link rel="prefetch" href="/assets/js/47.ef3e96e9.js"><link rel="prefetch" href="/assets/js/48.2923f43d.js"><link rel="prefetch" href="/assets/js/49.30e0fe44.js"><link rel="prefetch" href="/assets/js/5.7c7749a8.js"><link rel="prefetch" href="/assets/js/50.2f619fa8.js"><link rel="prefetch" href="/assets/js/51.85cd9572.js"><link rel="prefetch" href="/assets/js/52.37869db5.js"><link rel="prefetch" href="/assets/js/53.c0127118.js"><link rel="prefetch" href="/assets/js/54.75416c42.js"><link rel="prefetch" href="/assets/js/55.3a777cbe.js"><link rel="prefetch" href="/assets/js/56.f6dab9be.js"><link rel="prefetch" href="/assets/js/57.63169b90.js"><link rel="prefetch" href="/assets/js/58.96fbacda.js"><link rel="prefetch" href="/assets/js/59.10f7f026.js"><link rel="prefetch" href="/assets/js/6.10d1cb7c.js"><link rel="prefetch" href="/assets/js/60.293b9f06.js"><link rel="prefetch" href="/assets/js/61.dc639372.js"><link rel="prefetch" href="/assets/js/62.1d8a67bb.js"><link rel="prefetch" href="/assets/js/63.8710c4e1.js"><link rel="prefetch" href="/assets/js/64.2730d625.js"><link rel="prefetch" href="/assets/js/65.6d547ea3.js"><link rel="prefetch" href="/assets/js/66.3f14281d.js"><link rel="prefetch" href="/assets/js/67.a224fdad.js"><link rel="prefetch" href="/assets/js/68.08d33173.js"><link rel="prefetch" href="/assets/js/69.c372c0a4.js"><link rel="prefetch" href="/assets/js/7.7aaacf14.js"><link rel="prefetch" href="/assets/js/70.ad6c1a77.js"><link rel="prefetch" href="/assets/js/71.7d6cd811.js"><link rel="prefetch" href="/assets/js/72.7f03d2ea.js"><link rel="prefetch" href="/assets/js/73.b5813982.js"><link rel="prefetch" href="/assets/js/74.81032885.js"><link rel="prefetch" href="/assets/js/75.9e69c8bb.js"><link rel="prefetch" href="/assets/js/76.404bebc2.js"><link rel="prefetch" href="/assets/js/77.88a71943.js"><link rel="prefetch" href="/assets/js/78.35991ca7.js"><link rel="prefetch" href="/assets/js/79.42544d6c.js"><link rel="prefetch" href="/assets/js/8.369c074c.js"><link rel="prefetch" href="/assets/js/80.3ea8d15e.js"><link rel="prefetch" href="/assets/js/81.ffa2550d.js"><link rel="prefetch" href="/assets/js/82.92c95751.js"><link rel="prefetch" href="/assets/js/83.db1129ed.js"><link rel="prefetch" href="/assets/js/84.0d4ed3df.js"><link rel="prefetch" href="/assets/js/85.a82eed90.js"><link rel="prefetch" href="/assets/js/86.dc7872e9.js"><link rel="prefetch" href="/assets/js/87.eadf1786.js"><link rel="prefetch" href="/assets/js/88.4a476129.js"><link rel="prefetch" href="/assets/js/89.719bfd17.js"><link rel="prefetch" href="/assets/js/9.1bc77ba7.js"><link rel="prefetch" href="/assets/js/90.4fd24039.js"><link rel="prefetch" href="/assets/js/91.1002e8e1.js"><link rel="prefetch" href="/assets/js/92.2c249787.js"><link rel="prefetch" href="/assets/js/93.8d310eb4.js"><link rel="prefetch" href="/assets/js/94.1e299b90.js"><link rel="prefetch" href="/assets/js/95.61e63fb3.js"><link rel="prefetch" href="/assets/js/96.f1c359c1.js"><link rel="prefetch" href="/assets/js/97.b85fc8ad.js"><link rel="prefetch" href="/assets/js/98.4223ffd1.js"><link rel="prefetch" href="/assets/js/99.63a5a161.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c743a759.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">一起学前端</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/node.js/" class="nav-link">
  node.js
</a></div><div class="nav-item"><a href="https://juejin.cn/user/2137106337773645/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/node.js/" class="nav-link">
  node.js
</a></div><div class="nav-item"><a href="https://juejin.cn/user/2137106337773645/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VS Code</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>阅读源码</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/阅读源码/为什么 Vue2 this 能够直接获取到 data 和 methods中的变量和方法？.html" class="sidebar-link">为什么 Vue2 this 能够直接获取到 data 和 methods中的变量和方法？</a></li><li><a href="/tech/阅读源码/阅读axios源码工具函数（上）.html" class="sidebar-link">阅读axios源码工具函数（上）</a></li><li><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html" class="active sidebar-link">阅读axios源码工具函数（下）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#如何阅读-github-上的源码" class="sidebar-link">如何阅读 github 上的源码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#克隆-axios-项目查看源码" class="sidebar-link">克隆 axios 项目查看源码</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#axios-中的工具函数" class="sidebar-link">axios 中的工具函数</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#需要掌握的工具函数" class="sidebar-link">需要掌握的工具函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#trim-去除首尾空格" class="sidebar-link">trim 去除首尾空格</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#foreach-遍历对象或数组" class="sidebar-link">forEach 遍历对象或数组</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#merge-合并" class="sidebar-link">merge 合并</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#extend用于扩展当前对象的属性" class="sidebar-link">extend用于扩展当前对象的属性</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#inherits是将原型方法从一个构造函数继承到另一个构造函数" class="sidebar-link">inherits是将原型方法从一个构造函数继承到另一个构造函数</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#hasownproperty用于检查对象自身属性中是否具有指定的属性。" class="sidebar-link">hasOwnProperty用于检查对象自身属性中是否具有指定的属性。</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#endswith-是用来确定字符串是否以指定字符串的字符结尾。" class="sidebar-link">endsWith 是用来确定字符串是否以指定字符串的字符结尾。</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#toarray-用来将类数组对象转换为数组-如果失败则返回-null" class="sidebar-link">toArray 用来将类数组对象转换为数组，如果失败则返回 null</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#stripbom-删除utf-8编码中bom" class="sidebar-link">stripBOM 删除UTF-8编码中BOM</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#matchall-接受正则表达式和字符串-并返回所有匹配项的数组" class="sidebar-link">matchAll 接受正则表达式和字符串，并返回所有匹配项的数组</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#tocamelcase-转换为驼峰命名" class="sidebar-link">toCamelCase 转换为驼峰命名</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#noop-函数体为空的函数" class="sidebar-link">noop 函数体为空的函数</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#tofinitenumber" class="sidebar-link">toFiniteNumber</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#进阶函数" class="sidebar-link">进阶函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#foreachentry-迭代对象中的每一项-并调用函数-只适用于可迭代对象" class="sidebar-link">forEachEntry 迭代对象中的每一项，并调用函数（只适用于可迭代对象）</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#reducedescriptors-确定值是否为正则对象" class="sidebar-link">reduceDescriptors 确定值是否为正则对象</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#freezemethods-将函数设为不可修改-冻结函数" class="sidebar-link">freezeMethods 将函数设为不可修改（冻结函数）</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#toobjectset-将数组或字符串转换为对象" class="sidebar-link">toObjectSet 将数组或字符串转换为对象</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#toflatobject将具有原型链的对象解析为平面对象-拍平对象" class="sidebar-link">toFlatObject将具有原型链的对象解析为平面对象（拍平对象）</a></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#遍历、迭代、可迭代对象" class="sidebar-link">遍历、迭代、可迭代对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/阅读源码/阅读axios源码工具函数（下）.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/tech/阅读源码/阅读Vue2源码工具函数.html" class="sidebar-link">阅读Vue2源码工具函数</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jQuery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Sass</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bootstrap</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>BOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>http</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>正则表达式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mockjs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构和算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开源</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常见英文词汇</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong>本文参加了由<a href="https://link.juejin.cn/?target=https%3A%2F%2Flxchuan12.gitee.io" title="https://lxchuan12.gitee.io" target="_blank" rel="noopener noreferrer">公众号@若川视野<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 发起的每周源码共读活动，<a href="https://juejin.cn/post/7079706017579139102" title="https://juejin.cn/post/7079706017579139102" target="_blank" rel="noopener noreferrer">点击了解详情一起参与。<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong><br> <strong>这是源码共读的第19期，链接：<a href="https://juejin.cn/post/7083113675879350309" title="https://juejin.cn/post/7083113675879350309" target="_blank" rel="noopener noreferrer">axios 源码中10多个工具函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <blockquote><p>之前总觉得阅读源码是一件很了不起的事情，是只有大佬才会去做的事。但在工作了一段时间后，使用了很多的优秀的框架和库后，在感叹巧妙的设计之余——有时候也会想作者到底是怎么去实现的。于是就开始尝试阅读一些源码，发现<strong>其实源码也不是想象的那么难，至少有很多看得懂。</strong></p> <p>同时，源码有也有很多值得学习和借鉴的东西，不管是应用到日常开发中还是应对面试都是非常有用的，所以还是推荐大家也去尝试阅读的。</p></blockquote> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>这是我的阅读源码的第二篇文章，逐渐培养每周阅读源码并写文章记录的习惯。</p> <p>axios 是我们平时经常用到的网络请求库，可以同时用于 浏览器和node.js 环境中。今天我们来阅读 axios 源码，来了解其中的封装的工具函数。</p> <h2 id="如何阅读-github-上的源码"><a href="#如何阅读-github-上的源码" class="header-anchor">#</a> 如何阅读 github 上的源码</h2> <p>打开 <a href="https://github1s.com/axios/axios" target="_blank" rel="noopener noreferrer">axios<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 即可查看源码</p> <blockquote><p>在每一个<code>github</code>项目中的<code>url</code>里直接加上<code>1s</code>，就能在网页版<code>vscode</code>中查看源码了。（我在上面提供的链接已经添加了 <code>1s</code>）</p></blockquote> <p>如果这个方法不可行的话，还可以使用下面的方法把源码克隆到本地中进行查看。</p> <h3 id="克隆-axios-项目查看源码"><a href="#克隆-axios-项目查看源码" class="header-anchor">#</a> 克隆 axios 项目查看源码</h3> <p>开源项目一般能在根目录下的<code>README.md</code>文件或<code>CONTRIBUTING.md</code>中找到贡献指南。贡献指南中说明了参与贡献代码的一些注意事项，比如：<strong>代码风格、代码提交注释格式、开发、调试</strong>等。</p> <h2 id="axios-中的工具函数"><a href="#axios-中的工具函数" class="header-anchor">#</a> axios 中的工具函数</h2> <blockquote><p>axios 的工具函数都在 <a href="%5Burl%5D(https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Faxios%2Faxios%2Fblob%2Fmaster%2Flib%2Futils.js)">utils.js</a> 这个文件中，我们在平时也可以学习开源库的命名习惯，把工具函数放到 <code>utils.js</code> 文件中。</p></blockquote> <p>axios 源码的<code>utils.js</code>文件中有很多的工具函数，为了方便大家阅读，我将文章分为上、下两部分，本文是下半部分，介绍的是 <code>axios</code> 工具函数中的非常重要且可以<strong>用于日常开发</strong>中的函数。如：<code>merge</code>、<code>extend</code>、<code>forEach</code>等。<a href="https://juejin.cn/post/7145110519362355231" target="_blank" rel="noopener noreferrer">上半部分<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，介绍的是 <code>axios</code> 实现工具函数依赖的<strong>基本函数</strong>，还有工具函数中<strong>判断数据类型的函数</strong>。</p> <h2 id="需要掌握的工具函数"><a href="#需要掌握的工具函数" class="header-anchor">#</a> 需要掌握的工具函数</h2> <h3 id="trim-去除首尾空格"><a href="#trim-去除首尾空格" class="header-anchor">#</a> <code>trim</code> 去除首尾空格</h3> <p>优先使用 <code>string</code> 的原型链上的  <code>trim</code> 方法，如果没有则使用自定义的方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> str<span class="token punctuation">.</span>trim <span class="token operator">?</span>
  str<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>\s</code>：空格<br> <code>\uFEFF</code>：字节次序标记字符（Byte Order Mark），也就是BOM,它是es5新增的空白符<br> <code>\xA0</code>：禁止自动换行空白符，相当于html中的 </p></blockquote> <h3 id="foreach-遍历对象或数组"><a href="#foreach-遍历对象或数组" class="header-anchor">#</a> <code>forEach</code> 遍历对象或数组</h3> <p>这里的 <code>forEach</code> 不同于原生提供的 <code>forEach</code> 方法，原生的 <code>forEach</code> 只能迭代<code>数组</code>和<code>类数组对象</code>；而自定义 <code>forEach</code> 可以迭代<code>数组</code>和<code>对象</code>。</p> <blockquote><p><code>类数组对象</code>:格式与数组结构类似，拥有length属性，可以通过索引来访问或设置里面的元素，但是不能使用数组的方法，就叫类数组对象。 如：函数体内的<code>arguments</code>对象。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// obj 要操作的对象 / 数组</span>
<span class="token comment">// fn 要执行的回调函数</span>
<span class="token comment">// allOwnKeys 为 true 的时候会对对象内部不可枚举的属性也提取出来，而为 false 的时候只会提取出对象内部可枚举的属性</span>

<span class="token keyword">function</span> <span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token punctuation">{</span>allOwnKeys <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Don't bother if no value provided</span>
  <span class="token comment">// 如果值不存在，无需处理</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> i<span class="token punctuation">;</span>
  <span class="token keyword">let</span> l<span class="token punctuation">;</span>

  <span class="token comment">// Force an array if not already something iterable</span>
  <span class="token comment">// 如果不是对象类型，强制转成数组类型</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*eslint no-param-reassign:0*/</span>
    obj <span class="token operator">=</span> <span class="token punctuation">[</span>obj<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Iterate over array values</span>
    <span class="token comment">// 是数组，for循环执行回调fn</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// Iterate over object keys</span>
    <span class="token comment">// 是对象，for循环执行回调fn</span>
    <span class="token keyword">const</span> keys <span class="token operator">=</span> allOwnKeys <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">:</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Object.getOwnPropertyNames 可以获取对象中可枚举的属性和不可枚举的属性</span>
    <span class="token comment">// Object.keys 只可以获取对象中可枚举的属性</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> key<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      key <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个函数中遍历数组时使用的是<code>for</code>循环，而遍历对象时使用的是<code>for...in</code>，</p> <ul><li><strong><code>for</code></strong> 循环无法用于遍历对象，性能也比直接使用原生的 <strong><code>forEach</code></strong> 要好</li> <li><strong><code>for...in</code></strong> <strong>语句</strong>以任意顺序迭代一个对象的除<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" target="_blank" rel="noopener noreferrer">Symbol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>以外的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties" target="_blank" rel="noopener noreferrer">可枚举<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>属性，包括继承的可枚举属性。</li></ul> <blockquote><p>推荐大家去看一下这篇文章<a href="https://juejin.cn/post/7018097650687803422" target="_blank" rel="noopener noreferrer">有了for循环 为什么还要forEach？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>那么，为什么不统一使用<code>for...in</code>来处理呢？</p> <p>我搜索了得出以下结果，<strong><code>for...in</code></strong> 就是为遍历对象属性而构建的，而 <strong><code>for</code> 循环</strong>则是为遍历数组而构建的。请看<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/257aeb8f7cc9430f928bf388683850df~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h3 id="merge-合并"><a href="#merge-合并" class="header-anchor">#</a> <code>merge</code> 合并</h3> <p><code>merege</code> 函数是用于合并对象的场景中，如果对象中有相同的 key ，则优先使用参数列表中位置靠后的对象的值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 这里的 isPlainObject 是上一篇文章的函数，isArray 是原生的 Array.isArray 函数</span>
<span class="token keyword">function</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token comment">/* obj1, obj2, obj3, ... */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">assignValue</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isPlainObject</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果result中的 key和当前的 key是相同的，则当前的val会覆盖掉result的 val </span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果值是纯对象，则进行合并</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果值是数组，则对数组进行浅拷贝操作</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里使用的 forEach 是上面自定义的 forEach 方法  </span>
    arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">forEach</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> assignValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>下面我们来运行一下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例子 1</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">456</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs 456</span>

<span class="token comment">// 例子2</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">abc</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">def</span><span class="token operator">:</span> <span class="token number">890</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">jkl</span><span class="token operator">:</span> <span class="token number">678</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">456</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { foo: 456, bar: { abc: {def:890 }, jkl:678}}</span>
result<span class="token punctuation">.</span>bar<span class="token punctuation">.</span>abc<span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">567</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { foo: 456, bar: { abc: {def:567 }, jkl:678}}</span>
</code></pre></div><h3 id="extend用于扩展当前对象的属性"><a href="#extend用于扩展当前对象的属性" class="header-anchor">#</a> <code>extend</code>用于扩展当前对象的属性</h3> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// a 要扩展属性的对象</span>
 <span class="token comment">// b 要被复制属性的对象</span>
 <span class="token comment">// thisArg 绑定函数中的 this 指向</span>
 <span class="token comment">// {allOwnKeys} 是 forEach 中的参数，请到 forEach 函数部分去查看</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">extend</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> thisArg<span class="token punctuation">,</span> <span class="token punctuation">{</span>allOwnKeys<span class="token punctuation">}</span><span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">forEach</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>thisArg <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// isFunction 是上一篇文章中的方法</span>
      <span class="token comment">// 如果是函数，则复制函数内容并绑定this</span>
      a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> thisArg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>allOwnKeys<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里使用的 <code>bind</code> 方法是内部自定义的 <code>bind.js</code> 文件，内容如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="inherits是将原型方法从一个构造函数继承到另一个构造函数"><a href="#inherits是将原型方法从一个构造函数继承到另一个构造函数" class="header-anchor">#</a> <code>inherits</code>是将原型方法从一个构造函数继承到另一个构造函数</h3> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// constructor 子级构造函数</span>
 <span class="token comment">// superConstructor 父级构造函数</span>
 <span class="token comment">// props  需要添加到构造函数中的属性</span>
 <span class="token comment">// descriptors 如果不为 undefined`，则传入对象自身定义的可枚举属性（不包括原型链上的枚举属性），可以不传这个参数。</span>

<span class="token keyword">const</span> <span class="token function-variable function">inherits</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">constructor<span class="token punctuation">,</span> superConstructor<span class="token punctuation">,</span> props<span class="token punctuation">,</span> descriptors</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  constructor<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>superConstructor<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> descriptors<span class="token punctuation">)</span><span class="token punctuation">;</span>
  constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> constructor<span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>constructor<span class="token punctuation">,</span> <span class="token string">'super'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> superConstructor<span class="token punctuation">.</span>prototype
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  props <span class="token operator">&amp;&amp;</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>这个函数的 descriptors 参数并没有在axios源码中用到，我全局搜索后没有找到例子。这个参数其实就是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener noreferrer">Object.create<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的第二个参数。</p></blockquote> <h3 id="hasownproperty用于检查对象自身属性中是否具有指定的属性。"><a href="#hasownproperty用于检查对象自身属性中是否具有指定的属性。" class="header-anchor">#</a> <code>hasOwnProperty</code>用于检查对象自身属性中是否具有指定的属性。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> hasOwnProperty <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>hasOwnProperty<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prop<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这个函数我刚开始没有看懂，但我们拆分来看就很简单了，可以写成下面的形式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 下面一行代码是 axios 中新定义的 hasOwnProperty 方法</span>
<span class="token keyword">const</span> <span class="token function-variable function">newHasOwnProperty</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 下面一行代码是原生的  hasOwnProperty 方法</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> hasOwnProperty <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prop<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="endswith-是用来确定字符串是否以指定字符串的字符结尾。"><a href="#endswith-是用来确定字符串是否以指定字符串的字符结尾。" class="header-anchor">#</a> <code>endsWith</code> 是用来确定字符串是否以指定字符串的字符结尾。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// str 目标字符串</span>
<span class="token comment">// searchString 要查找的字符串</span>
<span class="token comment">// position 开始查找的位置 </span>

<span class="token keyword">const</span> <span class="token function-variable function">endsWith</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> searchString<span class="token punctuation">,</span> position</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 把参数转换为字符串类型</span>
  str <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 这里的 String 等同于 new String</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> position <span class="token operator">&gt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position <span class="token operator">=</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  position <span class="token operator">-=</span> searchString<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">const</span> lastIndex <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>searchString<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> lastIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> lastIndex <span class="token operator">===</span> position<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="toarray-用来将类数组对象转换为数组-如果失败则返回-null"><a href="#toarray-用来将类数组对象转换为数组-如果失败则返回-null" class="header-anchor">#</a> <code>toArray</code> 用来将类数组对象转换为数组，如果失败则返回 <code>null</code></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// thing 类数组对象</span>

<span class="token keyword">const</span> <span class="token function-variable function">toArray</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">thing</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>thing<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span>thing<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> thing<span class="token punctuation">;</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> thing<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isNumber</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> thing<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="stripbom-删除utf-8编码中bom"><a href="#stripbom-删除utf-8编码中bom" class="header-anchor">#</a> <code>stripBOM</code> 删除<code>UTF-8</code>编码中<code>BOM</code></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// content BOM字符串</span>
 
<span class="token keyword">function</span> <span class="token function">stripBOM</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0xFEFF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>所谓 <code>BOM</code>，全称是<code>Byte Order Mark</code>，它是一个<code>Unicode</code>字符，通常出现在文本的开头，用来标识字节序。<code>UTF-8</code>主要的优点是可以兼容<code>ASCII</code>，但如果使用<code>BOM</code>的话，这个好处就荡然无存了。</p> <h3 id="matchall-接受正则表达式和字符串-并返回所有匹配项的数组"><a href="#matchall-接受正则表达式和字符串-并返回所有匹配项的数组" class="header-anchor">#</a> <code>matchAll</code> 接受正则表达式和字符串，并返回所有匹配项的数组</h3> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// regExp 要匹配的正则表达式</span>
 <span class="token comment">// str 要查找的字符串</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">matchAll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">regExp<span class="token punctuation">,</span> str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> matches<span class="token punctuation">;</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>matches <span class="token operator">=</span> regExp<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="tocamelcase-转换为驼峰命名"><a href="#tocamelcase-转换为驼峰命名" class="header-anchor">#</a> <code>toCamelCase</code> 转换为驼峰命名</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">toCamelCase</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[_-\s]([a-z\d])(\w*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token function">replacer</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> p1<span class="token punctuation">,</span> p2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> p1<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> p2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="noop-函数体为空的函数"><a href="#noop-函数体为空的函数" class="header-anchor">#</a> <code>noop</code> 函数体为空的函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">noop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="tofinitenumber"><a href="#tofinitenumber" class="header-anchor">#</a> <code>toFiniteNumber</code></h3> <p><code>toFiniteNumber</code> 用于把无穷数转换成有穷数，如果是无穷数则设定为默认数，如果是有穷数则直接返回</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">toFiniteNumber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> defaultValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  value <span class="token operator">=</span> <span class="token operator">+</span>value<span class="token punctuation">;</span>
  <span class="token keyword">return</span> Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> value <span class="token operator">:</span> defaultValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="进阶函数"><a href="#进阶函数" class="header-anchor">#</a> 进阶函数</h2> <p>这部分的函数有一定的难度，可以根据自己的情况酌情学习。</p> <h3 id="foreachentry-迭代对象中的每一项-并调用函数-只适用于可迭代对象"><a href="#foreachentry-迭代对象中的每一项-并调用函数-只适用于可迭代对象" class="header-anchor">#</a> <code>forEachEntry</code> 迭代对象中的每一项，并调用函数（只适用于可迭代对象）</h3> <blockquote><p>要搞清楚这个函数，需要先了解一下<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Iterators_and_Generators" target="_blank" rel="noopener noreferrer">迭代器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols" target="_blank" rel="noopener noreferrer">迭代协议<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// obj 要迭代的对象</span>
 <span class="token comment">// fn 要执行的回调函数</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">forEachEntry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> generator <span class="token operator">=</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> result<span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>result <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pair <span class="token operator">=</span> result<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pair<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看出这个函数和<code>forEach</code>的功能有点相似，那么，<code>forEachEntry</code> 和 <code>forEach</code> 有什么区别呢？</p> <ul><li><code>forEachEntry</code> 是对可迭代对象的每一项执行fn，只能作用于可迭代对象
，<code>forEach</code> 可以处理任何数据类型</li> <li><code>forEachEntry</code> 可以通过定义迭代器的方式来控制循环的终止，<code>forEach</code> 对每一项都执行了回调</li></ul> <h3 id="reducedescriptors-确定值是否为正则对象"><a href="#reducedescriptors-确定值是否为正则对象" class="header-anchor">#</a> <code>reduceDescriptors</code> 确定值是否为正则对象</h3> <p>我特地去axios源码全局搜索了这个函数，没有发现在其他地方有使用到，只是用来实现下面的<code>freezeMethods</code>方法的辅助函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> isRegExp <span class="token operator">=</span> <span class="token function">kindOfTest</span><span class="token punctuation">(</span><span class="token string">'RegExp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">reduceDescriptors</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> reducer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> descriptors <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> reducedDescriptors <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">forEach</span><span class="token punctuation">(</span>descriptors<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">descriptor<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">reducer</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">,</span> name<span class="token punctuation">,</span> obj<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      reducedDescriptors<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> descriptor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> reducedDescriptors<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="freezemethods-将函数设为不可修改-冻结函数"><a href="#freezemethods-将函数设为不可修改-冻结函数" class="header-anchor">#</a> <code>freezeMethods</code> 将函数设为不可修改（冻结函数）</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">freezeMethods</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">reduceDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">descriptor<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

    descriptor<span class="token punctuation">.</span>enumerable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'writable'</span> <span class="token keyword">in</span> descriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      descriptor<span class="token punctuation">.</span>writable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>descriptor<span class="token punctuation">.</span>set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      descriptor<span class="token punctuation">.</span><span class="token function-variable function">set</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">'Can not read-only method \''</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="toobjectset-将数组或字符串转换为对象"><a href="#toobjectset-将数组或字符串转换为对象" class="header-anchor">#</a> <code>toObjectSet</code> 将数组或字符串转换为对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">toObjectSet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arrayOrString<span class="token punctuation">,</span> delimiter</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">define</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">isArray</span><span class="token punctuation">(</span>arrayOrString<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">define</span><span class="token punctuation">(</span>arrayOrString<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>arrayOrString<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>delimiter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="toflatobject将具有原型链的对象解析为平面对象-拍平对象"><a href="#toflatobject将具有原型链的对象解析为平面对象-拍平对象" class="header-anchor">#</a> <code>toFlatObject</code>将具有原型链的对象解析为平面对象（拍平对象）</h3> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// sourceObj 源对象</span>
 <span class="token comment">// destObj 目标对象</span>
 <span class="token comment">// filter 过滤器</span>
 <span class="token comment">// propFilter 传入参数的过滤器</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">toFlatObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">sourceObj<span class="token punctuation">,</span> destObj<span class="token punctuation">,</span> filter<span class="token punctuation">,</span> propFilter</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> props<span class="token punctuation">;</span>
  <span class="token keyword">let</span> i<span class="token punctuation">;</span>
  <span class="token keyword">let</span> prop<span class="token punctuation">;</span>
  <span class="token keyword">const</span> merged <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  destObj <span class="token operator">=</span> destObj <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// eslint-disable-next-line no-eq-null,eqeqeq</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sourceObj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> destObj<span class="token punctuation">;</span>

  <span class="token keyword">do</span> <span class="token punctuation">{</span>
    props <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>sourceObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> props<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      prop <span class="token operator">=</span> props<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span>propFilter <span class="token operator">||</span> <span class="token function">propFilter</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> sourceObj<span class="token punctuation">,</span> destObj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>merged<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        destObj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> sourceObj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
        merged<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    sourceObj <span class="token operator">=</span> filter <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>sourceObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>sourceObj <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>filter <span class="token operator">||</span> <span class="token function">filter</span><span class="token punctuation">(</span>sourceObj<span class="token punctuation">,</span> destObj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> sourceObj <span class="token operator">!==</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> destObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="遍历、迭代、可迭代对象"><a href="#遍历、迭代、可迭代对象" class="header-anchor">#</a> 遍历、迭代、可迭代对象</h3> <p><strong>遍历</strong>：指的对数据结构的每一个成员进行有规律的且为一次访问的行为。<br> <strong>迭代</strong>：迭代是递归的一种特殊形式，是迭代器提供的一种方法，默认情况下是按照一定顺序<strong>逐个</strong>访问数据结构成员。迭代也是一种遍历行为。<br> <strong>可迭代对象</strong>：ES6中引入了 <code>iterable</code> 类型，<code>Array</code> <code>Set</code> <code>Map</code> <code>String</code> <code>arguments</code> <code>NodeList</code> 都属于 <code>iterable</code>，他们特点就是都拥有 <code>[Symbol.iterator]</code> 方法，包含他的对象被认为是可迭代的 <code>iterable</code>。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本文主要介绍了<code>axios</code>源码<code>utils.js</code>中的非常重要且可以<strong>用于日常开发</strong>中的函数，如：<code>merge</code>、<code>extend</code>、<code>forEach</code>等。本文后半部分的进阶函数的难度就提升了不少，我也是花费了一些时间查阅了很多资料才理解了函数的含义。终于把这个坑填上了，学到了不少东西，也耗费了很多时间和精力，加油！！！</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tech/阅读源码/阅读axios源码工具函数（上）.html" class="prev">
        阅读axios源码工具函数（上）
      </a></span> <span class="next"><a href="/tech/阅读源码/阅读Vue2源码工具函数.html">
        阅读Vue2源码工具函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3aeb1e98.js" defer></script><script src="/assets/js/2.83af3cc0.js" defer></script><script src="/assets/js/124.55deaf22.js" defer></script>
  </body>
</html>
