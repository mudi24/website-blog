(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{373:function(s,t,a){"use strict";a.r(t);var r=a(14),n=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"同源策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#同源策略"}},[s._v("#")]),s._v(" 同源策略")]),s._v(" "),a("ul",[a("li",[s._v("协议+ 域名+端口，完全一致")]),s._v(" "),a("li",[s._v("window.origin 或者 location.origin 可以得到当前源")]),s._v(" "),a("li",[s._v("https://baidu.com 与 https://www.baidu.com 不同源")])]),s._v(" "),a("h2",{attrs:{id:"为什么需要同源策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要同源策略"}},[s._v("#")]),s._v(" 为什么需要同源策略")]),s._v(" "),a("ul",[a("li",[s._v("如果没有同源策略的话，无法区分发送者，就可能被别有用心的人利用，去获取用户的其他隐私信息")]),s._v(" "),a("li",[s._v("虽然通过检查 referer 可以判断出 referer 的身份，但是为了避免后端开发人员没有检查或者忘记检查的情况，浏览器主动预防了这种偷数据的行为")])]),s._v(" "),a("h2",{attrs:{id:"cors-分为简单请求和复杂请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cors-分为简单请求和复杂请求"}},[s._v("#")]),s._v(" CORS（分为简单请求和复杂请求）")]),s._v(" "),a("ul",[a("li",[s._v("服务端添加响应头")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("header"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"referer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nresponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Access-Control-Allow-Origin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"jsonp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonp"}},[s._v("#")]),s._v(" JSONP")]),s._v(" "),a("ul",[a("li",[s._v("使用 script 标签去请求 js，js 把数据带回来，就可以拿到数据")]),s._v(" "),a("li",[s._v("优点：支持 IE")]),s._v(" "),a("li",[s._v("缺点：读不到状态码，无法拿到 header（因为是 script 标签）")]),s._v(" "),a("li",[s._v("缺点：不支持 POST，只支持 GET")])]),s._v(" "),a("p",[s._v("baidu.com 访问 qq.com")]),s._v(" "),a("ul",[a("li",[s._v("qq.com 将数据写到 friend.js")]),s._v(" "),a("li",[s._v("baidu.com 用 script 标签引用 、friend.js")]),s._v(" "),a("li",[s._v("baidu.com 实现定义好 window.xxx 函数")]),s._v(" "),a("li",[s._v("/friend.js 执行 window.xxx({friends:[...]})")]),s._v(" "),a("li",[s._v("然后 baidu.com 就通过 window.xxx 获取到数据了")])]),s._v(" "),a("h2",{attrs:{id:"为什么不同域名-但可以在其他域名下使用-css-js-和图片等"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么不同域名-但可以在其他域名下使用-css-js-和图片等"}},[s._v("#")]),s._v(" 为什么不同域名，但可以在其他域名下使用 css，js 和图片等？")]),s._v(" "),a("ul",[a("li",[s._v("同源策略限制的是数据访问，引用 css，js 和图片时，其实不知道内容是什么，只是在引用")])])])}),[],!1,null,null,null);t.default=n.exports}}]);