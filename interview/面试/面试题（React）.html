<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试题（React） | 一起学前端</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.c743a759.css" as="style"><link rel="preload" href="/assets/js/app.3aeb1e98.js" as="script"><link rel="preload" href="/assets/js/2.83af3cc0.js" as="script"><link rel="preload" href="/assets/js/19.504036bb.js" as="script"><link rel="prefetch" href="/assets/js/10.3b2706bb.js"><link rel="prefetch" href="/assets/js/100.c8f756f0.js"><link rel="prefetch" href="/assets/js/101.04b72338.js"><link rel="prefetch" href="/assets/js/102.8a80ca0d.js"><link rel="prefetch" href="/assets/js/103.39222573.js"><link rel="prefetch" href="/assets/js/104.ef400740.js"><link rel="prefetch" href="/assets/js/105.cec6e582.js"><link rel="prefetch" href="/assets/js/106.b3f2d115.js"><link rel="prefetch" href="/assets/js/107.6fab1075.js"><link rel="prefetch" href="/assets/js/108.34b05216.js"><link rel="prefetch" href="/assets/js/109.097f1fcb.js"><link rel="prefetch" href="/assets/js/11.d0e2210e.js"><link rel="prefetch" href="/assets/js/110.98b0cd18.js"><link rel="prefetch" href="/assets/js/111.ac942fbf.js"><link rel="prefetch" href="/assets/js/112.37924f75.js"><link rel="prefetch" href="/assets/js/113.e0f894d4.js"><link rel="prefetch" href="/assets/js/114.d2967b20.js"><link rel="prefetch" href="/assets/js/115.42ac08cd.js"><link rel="prefetch" href="/assets/js/116.d91753ef.js"><link rel="prefetch" href="/assets/js/117.f4538cd6.js"><link rel="prefetch" href="/assets/js/118.2d8297db.js"><link rel="prefetch" href="/assets/js/119.e655a176.js"><link rel="prefetch" href="/assets/js/12.f8c43eb2.js"><link rel="prefetch" href="/assets/js/120.9de91b9b.js"><link rel="prefetch" href="/assets/js/121.c87bffa0.js"><link rel="prefetch" href="/assets/js/122.3da90492.js"><link rel="prefetch" href="/assets/js/123.b0f831ca.js"><link rel="prefetch" href="/assets/js/124.55deaf22.js"><link rel="prefetch" href="/assets/js/125.ce7b3e7e.js"><link rel="prefetch" href="/assets/js/126.f1046b02.js"><link rel="prefetch" href="/assets/js/127.4f2064bd.js"><link rel="prefetch" href="/assets/js/128.954f6993.js"><link rel="prefetch" href="/assets/js/129.27175358.js"><link rel="prefetch" href="/assets/js/13.b0d38a0a.js"><link rel="prefetch" href="/assets/js/130.eeffe648.js"><link rel="prefetch" href="/assets/js/131.6fb52502.js"><link rel="prefetch" href="/assets/js/132.d69871d0.js"><link rel="prefetch" href="/assets/js/133.0d1c7395.js"><link rel="prefetch" href="/assets/js/134.20aa1a8e.js"><link rel="prefetch" href="/assets/js/135.4dceb969.js"><link rel="prefetch" href="/assets/js/136.2a931837.js"><link rel="prefetch" href="/assets/js/137.4a3ea2bc.js"><link rel="prefetch" href="/assets/js/138.f3835b29.js"><link rel="prefetch" href="/assets/js/139.b9f3bbb3.js"><link rel="prefetch" href="/assets/js/14.fe64de54.js"><link rel="prefetch" href="/assets/js/140.811b72d5.js"><link rel="prefetch" href="/assets/js/141.80a96e0b.js"><link rel="prefetch" href="/assets/js/142.9fe53172.js"><link rel="prefetch" href="/assets/js/143.f1f9891c.js"><link rel="prefetch" href="/assets/js/144.09369c3e.js"><link rel="prefetch" href="/assets/js/15.7784b150.js"><link rel="prefetch" href="/assets/js/16.dca47ed7.js"><link rel="prefetch" href="/assets/js/17.053c0c85.js"><link rel="prefetch" href="/assets/js/18.7d76c9cc.js"><link rel="prefetch" href="/assets/js/20.cdf651a9.js"><link rel="prefetch" href="/assets/js/21.750cb245.js"><link rel="prefetch" href="/assets/js/22.85646704.js"><link rel="prefetch" href="/assets/js/23.9c2d9bfa.js"><link rel="prefetch" href="/assets/js/24.b9b5e278.js"><link rel="prefetch" href="/assets/js/25.787db747.js"><link rel="prefetch" href="/assets/js/26.1b65e7e2.js"><link rel="prefetch" href="/assets/js/27.5b29b74d.js"><link rel="prefetch" href="/assets/js/28.c41c72df.js"><link rel="prefetch" href="/assets/js/29.f452a5af.js"><link rel="prefetch" href="/assets/js/3.b7576c58.js"><link rel="prefetch" href="/assets/js/30.4d7c359f.js"><link rel="prefetch" href="/assets/js/31.6cf93bd9.js"><link rel="prefetch" href="/assets/js/32.b3e0e356.js"><link rel="prefetch" href="/assets/js/33.731b7cbd.js"><link rel="prefetch" href="/assets/js/34.eb522b7e.js"><link rel="prefetch" href="/assets/js/35.7e9a32ef.js"><link rel="prefetch" href="/assets/js/36.7d0ff7fd.js"><link rel="prefetch" href="/assets/js/37.f6bb08ad.js"><link rel="prefetch" href="/assets/js/38.cdb5bb8c.js"><link rel="prefetch" href="/assets/js/39.f16d59e2.js"><link rel="prefetch" href="/assets/js/4.30bc6949.js"><link rel="prefetch" href="/assets/js/40.c3b52b21.js"><link rel="prefetch" href="/assets/js/41.3cf2209b.js"><link rel="prefetch" href="/assets/js/42.acafff1c.js"><link rel="prefetch" href="/assets/js/43.33fc0f17.js"><link rel="prefetch" href="/assets/js/44.4a24ebd3.js"><link rel="prefetch" href="/assets/js/45.47b9a80c.js"><link rel="prefetch" href="/assets/js/46.a20cee2e.js"><link rel="prefetch" href="/assets/js/47.ef3e96e9.js"><link rel="prefetch" href="/assets/js/48.2923f43d.js"><link rel="prefetch" href="/assets/js/49.30e0fe44.js"><link rel="prefetch" href="/assets/js/5.7c7749a8.js"><link rel="prefetch" href="/assets/js/50.2f619fa8.js"><link rel="prefetch" href="/assets/js/51.85cd9572.js"><link rel="prefetch" href="/assets/js/52.37869db5.js"><link rel="prefetch" href="/assets/js/53.c0127118.js"><link rel="prefetch" href="/assets/js/54.75416c42.js"><link rel="prefetch" href="/assets/js/55.3a777cbe.js"><link rel="prefetch" href="/assets/js/56.f6dab9be.js"><link rel="prefetch" href="/assets/js/57.63169b90.js"><link rel="prefetch" href="/assets/js/58.96fbacda.js"><link rel="prefetch" href="/assets/js/59.10f7f026.js"><link rel="prefetch" href="/assets/js/6.10d1cb7c.js"><link rel="prefetch" href="/assets/js/60.293b9f06.js"><link rel="prefetch" href="/assets/js/61.dc639372.js"><link rel="prefetch" href="/assets/js/62.1d8a67bb.js"><link rel="prefetch" href="/assets/js/63.8710c4e1.js"><link rel="prefetch" href="/assets/js/64.2730d625.js"><link rel="prefetch" href="/assets/js/65.6d547ea3.js"><link rel="prefetch" href="/assets/js/66.3f14281d.js"><link rel="prefetch" href="/assets/js/67.a224fdad.js"><link rel="prefetch" href="/assets/js/68.08d33173.js"><link rel="prefetch" href="/assets/js/69.c372c0a4.js"><link rel="prefetch" href="/assets/js/7.7aaacf14.js"><link rel="prefetch" href="/assets/js/70.ad6c1a77.js"><link rel="prefetch" href="/assets/js/71.7d6cd811.js"><link rel="prefetch" href="/assets/js/72.7f03d2ea.js"><link rel="prefetch" href="/assets/js/73.b5813982.js"><link rel="prefetch" href="/assets/js/74.81032885.js"><link rel="prefetch" href="/assets/js/75.9e69c8bb.js"><link rel="prefetch" href="/assets/js/76.404bebc2.js"><link rel="prefetch" href="/assets/js/77.88a71943.js"><link rel="prefetch" href="/assets/js/78.35991ca7.js"><link rel="prefetch" href="/assets/js/79.42544d6c.js"><link rel="prefetch" href="/assets/js/8.369c074c.js"><link rel="prefetch" href="/assets/js/80.3ea8d15e.js"><link rel="prefetch" href="/assets/js/81.ffa2550d.js"><link rel="prefetch" href="/assets/js/82.92c95751.js"><link rel="prefetch" href="/assets/js/83.db1129ed.js"><link rel="prefetch" href="/assets/js/84.0d4ed3df.js"><link rel="prefetch" href="/assets/js/85.a82eed90.js"><link rel="prefetch" href="/assets/js/86.dc7872e9.js"><link rel="prefetch" href="/assets/js/87.eadf1786.js"><link rel="prefetch" href="/assets/js/88.4a476129.js"><link rel="prefetch" href="/assets/js/89.719bfd17.js"><link rel="prefetch" href="/assets/js/9.1bc77ba7.js"><link rel="prefetch" href="/assets/js/90.4fd24039.js"><link rel="prefetch" href="/assets/js/91.1002e8e1.js"><link rel="prefetch" href="/assets/js/92.2c249787.js"><link rel="prefetch" href="/assets/js/93.8d310eb4.js"><link rel="prefetch" href="/assets/js/94.1e299b90.js"><link rel="prefetch" href="/assets/js/95.61e63fb3.js"><link rel="prefetch" href="/assets/js/96.f1c359c1.js"><link rel="prefetch" href="/assets/js/97.b85fc8ad.js"><link rel="prefetch" href="/assets/js/98.4223ffd1.js"><link rel="prefetch" href="/assets/js/99.63a5a161.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c743a759.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">一起学前端</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/interview/" class="nav-link router-link-active">
  面试题
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/node.js/" class="nav-link">
  node.js
</a></div><div class="nav-item"><a href="https://juejin.cn/user/2137106337773645/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/interview/" class="nav-link router-link-active">
  面试题
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/node.js/" class="nav-link">
  node.js
</a></div><div class="nav-item"><a href="https://juejin.cn/user/2137106337773645/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端面试题</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/面试/面试题（CSS）.html" class="sidebar-link">面试题（CSS）</a></li><li><a href="/interview/面试/面试题（JS）.html" class="sidebar-link">面试题（JS）</a></li><li><a href="/interview/面试/面试题（Vue）.html" class="sidebar-link">面试题（Vue）</a></li><li><a href="/interview/面试/面试题（React）.html" class="active sidebar-link">面试题（React）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#虚拟-dom-的原理是什么" class="sidebar-link">虚拟 DOM 的原理是什么？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#是什么" class="sidebar-link">是什么</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#怎么做" class="sidebar-link">怎么做</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#解决了什么问题" class="sidebar-link">解决了什么问题</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#优点" class="sidebar-link">优点</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#缺点" class="sidebar-link">缺点</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#如何解决缺点" class="sidebar-link">如何解决缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#react-或-vue-的-dom-diff-算法是怎样的" class="sidebar-link">React 或 Vue 的 DOM diff 算法是怎样的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#是什么-2" class="sidebar-link">是什么</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#怎么做-2" class="sidebar-link">怎么做</a></li></ul></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#react-有哪些生命周期钩子函数-数据请求放在哪个钩子里" class="sidebar-link">React 有哪些生命周期钩子函数？数据请求放在哪个钩子里？</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#react-如何实现组件间通信" class="sidebar-link">React 如何实现组件间通信</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#你如何理解-redux" class="sidebar-link">你如何理解 Redux？</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#什么是高阶组件-hoc" class="sidebar-link">什么是高阶组件 HOC？</a></li><li class="sidebar-sub-header"><a href="/interview/面试/面试题（React）.html#react-hooks-如何模拟组件生命周期" class="sidebar-link">React Hooks 如何模拟组件生命周期？</a></li></ul></li><li><a href="/interview/面试/面试题（TS）.html" class="sidebar-link">面试题（TS）</a></li><li><a href="/interview/面试/面试题（浏览器）.html" class="sidebar-link">面试题（浏览器）</a></li><li><a href="/interview/面试/面试题（http和TCP）.html" class="sidebar-link">面试题（http和TCP）</a></li><li><a href="/interview/面试/面试题（性能优化）.html" class="sidebar-link">面试题（性能优化）</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="面试题-react"><a href="#面试题-react" class="header-anchor">#</a> 面试题（React）</h1> <h2 id="虚拟-dom-的原理是什么"><a href="#虚拟-dom-的原理是什么" class="header-anchor">#</a> 虚拟 DOM 的原理是什么？</h2> <h3 id="是什么"><a href="#是什么" class="header-anchor">#</a> 是什么</h3> <p>虚拟 DOM 就是虚拟节点（这句汉化很重要）。React 用 JS 对象来模拟 DOM 节点， 然后将其渲染成真实的 DOM 节点。</p> <h3 id="怎么做"><a href="#怎么做" class="header-anchor">#</a> 怎么做</h3> <p>第一步是模拟，用 JSX 语法写出来的 div 其实是一个虚拟节点：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;x&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;red&quot;</span><span class="token operator">&gt;</span>hi<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p>这代码会得到这样一个对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'x'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'span'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'red'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'hi'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>能做到这一点是因为 JSX 语法会被转译为 createElement 函数调用（也叫 h 函数）， 如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
  <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;x&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&quot;red&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第二步是将虚拟节点渲染为真实节点</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">vdom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果是字符串或者数字，创建一个文本节点</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vdom <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> vdom <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vdom<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        tag<span class="token punctuation">,</span>
        props<span class="token punctuation">,</span>
        children
    <span class="token punctuation">}</span> <span class="token operator">=</span> vdom
    <span class="token comment">// 创建真实DOM</span>
    <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span>
    <span class="token comment">// 设置属性</span>
    <span class="token function">setProps</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
    <span class="token comment">// 遍历子节点，并获取创建真实DOM，插入到当前节点</span>
    children
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// 虚拟 DOM 中缓存真实 DOM 节点</span>
    vdom<span class="token punctuation">.</span>dom <span class="token operator">=</span> element
    <span class="token comment">// 返回 DOM 节点</span>
    <span class="token keyword">return</span> element
<span class="token punctuation">}</span>

<span class="token keyword">function</span> setProps <span class="token comment">// 略</span>
<span class="token keyword">function</span> setProp <span class="token comment">// 略</span>
<span class="token comment">// 作者：Shenfq，链接：https://juejin.cn/post/6844903870229905422</span>
</code></pre></div><p>注意，如果节点发生变化，并不会直接把新虚拟节点渲染到真实节点，而是先经过 diff 算法得到一个 patch 再更新到真实节点上。</p> <h3 id="解决了什么问题"><a href="#解决了什么问题" class="header-anchor">#</a> 解决了什么问题</h3> <ol><li>DOM 操作性能问题。通过虚拟 DOM 和 diff 算法减少不必要的 DOM 操作，保证性能不太差</li> <li>DOM 操作不方便问题。以前各种 DOM API 要记，现在只有 setState</li></ol> <h3 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h3> <ol><li>为 React 带来了跨平台能力，因为虚拟节点除了渲染为真实节点，还可以渲染为其他东西。</li> <li>让 DOM 操作的整体性能更好，能（通过 diff）减少不必要的 DOM 操作。</li></ol> <h3 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h3> <ol><li>性能要求极高的地方，还是得用真实 DOM 操作（目前没遇到这种需求）</li> <li>React 为虚拟 DOM 创造了合成事件，跟原生 DOM 事件不太一样，工作中要额外注意
a. 所有 React 事件都绑定到根元素，自动实现事件委托
b. 如果混用合成事件和原生 DOM 事件，有可能会出 bug</li></ol> <h3 id="如何解决缺点"><a href="#如何解决缺点" class="header-anchor">#</a> 如何解决缺点</h3> <p>不用 React，用 Vue 3（笑）</p> <h2 id="react-或-vue-的-dom-diff-算法是怎样的"><a href="#react-或-vue-的-dom-diff-算法是怎样的" class="header-anchor">#</a> React 或 Vue 的 DOM diff 算法是怎样的？</h2> <h3 id="是什么-2"><a href="#是什么-2" class="header-anchor">#</a> 是什么</h3> <p>DOM diff 就是对比两棵虚拟 DOM 树的算法（废话很重要）。当组件变化时，会 render 出一个新的虚拟 DOM，diff 算法对比新旧虚拟 DOM 之后，得到一个 patch，然后 React 用 patch 来更新真实 DOM。</p> <h3 id="怎么做-2"><a href="#怎么做-2" class="header-anchor">#</a> 怎么做</h3> <p>首先，对比两棵树的根节点</p> <ol><li>如果根节点的类型改变了，比如 div 变成了 p，那么直接认为整棵树都变了，不再对比子节点。此时直接删除对应的真实 DOM 树，创建新的真实 DOM 树。</li> <li>如果根节点的类型没变，就看看属性变了没有
a. 如果没变，就保留对应的真实节点
b. 如果变了，就只更新该节点的属性，不重新创建节点。
i. 更新 style 时，如果多个 css 属性只有一个改变了，那么 React 只更新改变的。
然后，同时遍历两棵树的子节点，每个节点的对比过程同上，不过存在如下两种情况</li> <li>情况一</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre></div><p>React 依次对比 A-A、B-B、空-C，发现 C 是新增的，最终会创建真实 C 节点插入页面 2. 情况二</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre></div><p>React 对比 B-A，会删除 B 文本新建 A 文本；对比 C-B，会删除 C 文本，新建 B 文本；（注意，并不是边对比边删除新建，而是把操作汇总到 patch 里再进行 DOM 操作。）对比空-C，会新建 C 文本。
你会发现其实只需要创建 A 文本，保留 B 和 C 即可，为什么 React 做不到呢？ 因为 React 需要你加 key 才能做到：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token string">&quot;c&quot;</span><span class="token operator">&gt;</span><span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token operator">&gt;</span><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token string">&quot;c&quot;</span><span class="token operator">&gt;</span><span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre></div><p>React 先对比 key 发现 key 只新增了一个，于是保留 b 和 c，新建 a。</p> <p>但面试官想听的可能是 Vue 的「双端交叉对比」算法：
https://canyuegongzi.github.io/web/vue/3.html#%E5%85%B7%E4%BD%93%E7%9A%84diff%E5%88%86%E6%9E%90
https://juejin.cn/post/6971622260490797069</p> <h2 id="react-有哪些生命周期钩子函数-数据请求放在哪个钩子里"><a href="#react-有哪些生命周期钩子函数-数据请求放在哪个钩子里" class="header-anchor">#</a> React 有哪些生命周期钩子函数？数据请求放在哪个钩子里？</h2> <p>class 组件才有生命周期，function 组件没有生命周期
React 的文档稍微有点乱，需要配合两个地方一起看才能记忆清楚：<br>
https://reactjs.org/docs/react-component.html#the-component-lifecycle<br>
https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/</p> <p><img src="http://rq9s5lc0q.hb-bkt.clouddn.com/blog/react/react-lifecycle.png?e=1677833719&amp;token=T2pLxEmUwd9-tHhgpCQLKzpsG4xUBY7QSVH24GdD:6h0iNcAGkYtXGTXPV7aIyHjV9-g=" alt="">
总得来说：</p> <ol><li>挂载时调用 constructor，更新时不调用</li> <li>更新时调用 shouldComponentUpdate 和 getSnapshotBeforeUpdate，挂载时不
调用</li> <li>should... 在 render 前调用，getSnapshot... 在 render 后调用</li> <li>请求放在 componentDidMount 里，最好写博客，容易忘。</li></ol> <h2 id="react-如何实现组件间通信"><a href="#react-如何实现组件间通信" class="header-anchor">#</a> React 如何实现组件间通信</h2> <ol><li>父子组件通信：props + 函数</li> <li>爷孙组件通信：两层父子通信或者使用 Context.Provider 和 Context.Consumer</li> <li>任意组件通信：其实就变成了状态管理了
a. Redux
b. Mobx
c. Recoil</li></ol> <h2 id="你如何理解-redux"><a href="#你如何理解-redux" class="header-anchor">#</a> 你如何理解 Redux？</h2> <ol><li>文档第一句话背下来：Redux 是一个状态管理库/状态容器。</li> <li>把 Redux 的核心概念说一下：
a. State
b. Action = type + payload 荷载
c. Reducer
d. Dispatch 派发
e. Middleware</li> <li>把 ReactRedux 的核心概念说一下：
a. connect()(Component)
b. mapStateToProps
c. mapDispatchToProps</li> <li>说两个常见的中间件 redux-thunk redux-promise</li></ol> <h2 id="什么是高阶组件-hoc"><a href="#什么是高阶组件-hoc" class="header-anchor">#</a> 什么是高阶组件 HOC？</h2> <p>参数是组件，返回值也是组件的函数。什么都能做，所以抽象问题就具体回答。
举例说明即可：</p> <ol><li>React.forwardRef</li> <li>ReactRedux 的 connect</li> <li>ReactRouter 的 withRouter
参考阅读：
<a href="https://juejin.cn/post/6940422320427106335#heading-0" target="_blank" rel="noopener noreferrer">「react 进阶」一文吃透 React 高阶组件(HOC)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h2 id="react-hooks-如何模拟组件生命周期"><a href="#react-hooks-如何模拟组件生命周期" class="header-anchor">#</a> React Hooks 如何模拟组件生命周期？</h2> <ol><li>模拟 componentDidMount</li> <li>模拟 componentDidUpdate</li> <li>模拟 componentWillUnmount
代码示例如下</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>visible<span class="token punctuation">,</span> setNextVisible<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNextVisible</span><span class="token punctuation">(</span><span class="token operator">!</span>visible<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello CodeSandbox<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>visible <span class="token operator">?</span> <span class="token operator">&lt;</span>Frank <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>toggle<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Frank</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> setNextN<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> first <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>first<span class="token punctuation">.</span>current <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;did update&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;did mount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    first<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;did unmount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNextN</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      Frank
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview/面试/面试题（Vue）.html" class="prev">
        面试题（Vue）
      </a></span> <span class="next"><a href="/interview/面试/面试题（TS）.html">
        面试题（TS）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3aeb1e98.js" defer></script><script src="/assets/js/2.83af3cc0.js" defer></script><script src="/assets/js/19.504036bb.js" defer></script>
  </body>
</html>
